webpackJsonp([14],{"0oXk":function(e,r){},ELqv:function(e,r){},r1QR:function(e,r){},"xqY/":function(e,r,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=s("Xxa5"),a=s.n(t),o=s("exGp"),l=s.n(o),n=s("t5DY"),i=s("4UJP"),u=s("E4LH"),c={loginName:[{required:!0,message:"请输入",trigger:"blur"},{min:6,max:20,message:"请输入最少要输入6个字符，不超过20个字符",trigger:"blur"},{pattern:/^\w+$/,message:"只能包括英文字母、数字和下划线",trigger:"blur"}],userMobile:[{pattern:u.c,message:"请输入正确的手机号",trigger:"blur"}],userPhone:[{validator:u.d,trigger:"blur"}],userSort:[{validator:Object(u.b)(0,10),trigger:"blur"},{pattern:/^\d+$/,message:"只能包括数字",trigger:"blur"}],userName:[{required:!0,message:"请输入",trigger:"blur"},{min:1,max:10,message:"请输入不超过10个字符",trigger:"blur"}],remarks:[{max:150,message:"请输入不超过150个字符",trigger:"change"}]},f={name:"PersonalInfoForm",data:function(){return{loading:!1,identityTypes:[],userDutys:[],userRanks:[],ruleForm:{},rules:c}},created:function(){this.getDictsData(),this.getFormData()},methods:{validateSubmit:function(e){var r,s=this;this.$refs.ruleForm.validate((r=l()(a.a.mark(function r(t){return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!t){r.next=4;break}s.submit(e),r.next=5;break;case 4:return r.abrupt("return",!1);case 5:case"end":return r.stop()}},r,s)})),function(e){return r.apply(this,arguments)}))},submit:function(e){var r=this;return l()(a.a.mark(function s(){var t;return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log(e),r.loading=!0,s.next=4,Object(i.f)(e);case 4:t=s.sent,r.loading=!1,"0000"===t.code&&(r.$message({message:"更新用户信息成功",type:"success"}),r.$store.commit("SET_NAME",e.userName),r.getFormData());case 7:case"end":return s.stop()}},s,r)}))()},close:function(){this.closeView(this.$route)},getFormData:function(){var e=this;return l()(a.a.mark(function r(){var s;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(i.d)();case 2:"0000"===(s=r.sent).code&&(e.ruleForm=s.data||{});case 4:case"end":return r.stop()}},r,e)}))()},getDictsData:function(){var e=this;return l()(a.a.mark(function r(){var s,t,o;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(n.b)("sys_user_identity_type");case 2:return"0000"===(s=r.sent).code&&(e.identityTypes=s.data),r.next=6,Object(n.b)("sys_user_duty");case 6:return"0000"===(t=r.sent).code&&(e.userDutys=t.data),r.next=10,Object(n.b)("sys_user_rank");case 10:"0000"===(o=r.sent).code&&(e.userRanks=o.data);case 12:case"end":return r.stop()}},r,e)}))()}}},m={render:function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"110px"}},[s("h3",{staticClass:"jee-page-h3-title"},[e._v("个人信息")]),e._v(" "),s("el-row",[s("el-col",{attrs:{offset:1,span:10}},[s("el-form-item",{attrs:{label:"账号：",prop:"loginName"}},[s("el-input",{attrs:{disabled:"",size:"small",maxlength:"10",clearable:""},model:{value:e.ruleForm.loginName,callback:function(r){e.$set(e.ruleForm,"loginName",r)},expression:"ruleForm.loginName"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{offset:1,span:10}},[s("el-form-item",{attrs:{label:"用户名：",prop:"userName"}},[s("el-input",{attrs:{size:"small",maxlength:"10",clearable:""},model:{value:e.ruleForm.userName,callback:function(r){e.$set(e.ruleForm,"userName",r)},expression:"ruleForm.userName"}})],1)],1),e._v(" "),s("el-col",{attrs:{offset:1,span:10}},[s("el-form-item",{attrs:{label:"权重(排序)：",prop:"userSort"}},[s("el-input",{attrs:{size:"small",maxlength:"9",clearable:""},model:{value:e.ruleForm.userSort,callback:function(r){e.$set(e.ruleForm,"userSort",r)},expression:"ruleForm.userSort"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{offset:1,span:10}},[s("el-form-item",{attrs:{label:"手机号码：",prop:"userMobile"}},[s("el-input",{attrs:{size:"small",maxlength:"11",clearable:""},model:{value:e.ruleForm.userMobile,callback:function(r){e.$set(e.ruleForm,"userMobile",r)},expression:"ruleForm.userMobile"}})],1)],1),e._v(" "),s("el-col",{attrs:{offset:1,span:10}},[s("el-form-item",{attrs:{label:"办公电话：",prop:"userPhone"}},[s("el-input",{attrs:{size:"small",maxlength:"13",clearable:""},model:{value:e.ruleForm.userPhone,callback:function(r){e.$set(e.ruleForm,"userPhone",r)},expression:"ruleForm.userPhone"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{offset:1,span:21}},[s("el-form-item",{attrs:{label:"备注信息",prop:"remarks"}},[s("el-input",{attrs:{size:"small",rows:"3",type:"textarea"},model:{value:e.ruleForm.remarks,callback:function(r){e.$set(e.ruleForm,"remarks",r)},expression:"ruleForm.remarks"}})],1)],1)],1),e._v(" "),s("el-row",{staticClass:"jee-submit-buttons"},[s("el-col",{attrs:{offset:1,span:21}},[s("el-button",{attrs:{loading:e.loading,type:"primary",icon:"fa fa-check",size:"small"},on:{click:function(r){e.validateSubmit(e.ruleForm)}}},[e._v("  保 存")]),e._v(" "),s("el-button",{attrs:{icon:"fa fa-reply-all",size:"small"},on:{click:e.close}},[e._v("  关 闭")])],1)],1)],1)},staticRenderFns:[]};var p={name:"ChangePasssword",data:function(){var e=this;return{passwordType:"password",passwordType2:"password",ruleForm:{},rules:{oldPassword:[{required:!0,message:"请输入原密码",trigger:"blur"}],newPassword:[{required:!0,message:"新密码不能为空",trigger:"blur"},{validator:function(r,s,t){""===s?t(new Error("请输入密码")):s.length<6?t(new Error("密码不得小于6位")):(""!==e.ruleForm.newPassword&&e.$refs.ruleForm.validateField("newPassword2"),t())},trigger:"blur"}],newPassword2:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{validator:function(r,s,t){console.log(s),""===s?t(new Error("请再次输入密码")):s!==e.ruleForm.newPassword?t(new Error("两次输入密码不一致!")):t()},trigger:"blur"}]}}},methods:{togglePasswordType:function(){this.passwordType="password"===this.passwordType?"text":"password"},togglePasswordType2:function(){this.passwordType2="password"===this.passwordType2?"text":"password"},close:function(){this.closeView(this.$route)},validateSubmit:function(e){var r,s=this;this.$refs.ruleForm.validate((r=l()(a.a.mark(function r(t){return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!t){r.next=4;break}s.submit(e),r.next=5;break;case 4:return r.abrupt("return",!1);case 5:case"end":return r.stop()}},r,s)})),function(e){return r.apply(this,arguments)}))},submit:function(e){var r=this;return l()(a.a.mark(function s(){var t,o;return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:t=e.oldPassword,o=e.newPassword,r.$refs.ruleForm.validate(function(){var e=l()(a.a.mark(function e(s){var l;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=7;break}return e.next=3,Object(i.c)({oldPassword:t,newPassword:o});case 3:"0000"===(l=e.sent).code&&(console.log(l.data),r.$message({message:"更新密码成功！",type:"success"})),e.next=8;break;case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}},e,r)}));return function(r){return e.apply(this,arguments)}}());case 2:case"end":return s.stop()}},s,r)}))()}}},d={render:function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"110px"}},[s("h3",{staticClass:"jee-page-h3-title"},[e._v("修改密码")]),e._v(" "),s("el-row",[s("el-col",{attrs:{offset:1,span:10}},[s("el-form-item",{attrs:{label:"旧密码：",prop:"oldPassword"}},[s("el-input",{attrs:{type:e.passwordType,size:"small"},model:{value:e.ruleForm.oldPassword,callback:function(r){e.$set(e.ruleForm,"oldPassword",r)},expression:"ruleForm.oldPassword"}},["password"===e.passwordType?s("i",{staticClass:"fa fw fa-eye-slash",attrs:{slot:"suffix"},on:{click:e.togglePasswordType},slot:"suffix"}):s("i",{staticClass:"fa fw fa-eye",attrs:{slot:"suffix"},on:{click:e.togglePasswordType},slot:"suffix"})])],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{offset:1,span:10}},[s("el-form-item",{attrs:{label:"新密码：",prop:"newPassword"}},[s("el-input",{attrs:{type:e.passwordType2,size:"small"},model:{value:e.ruleForm.newPassword,callback:function(r){e.$set(e.ruleForm,"newPassword",r)},expression:"ruleForm.newPassword"}},["password"===e.passwordType2?s("i",{staticClass:"fa fw fa-eye-slash",attrs:{slot:"suffix"},on:{click:e.togglePasswordType2},slot:"suffix"}):s("i",{staticClass:"fa fw fa-eye",attrs:{slot:"suffix"},on:{click:e.togglePasswordType2},slot:"suffix"})])],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{offset:1,span:10}},[s("el-form-item",{attrs:{label:"确认新密码：",prop:"newPassword2"}},[s("el-input",{attrs:{type:e.passwordType2,size:"small"},model:{value:e.ruleForm.newPassword2,callback:function(r){e.$set(e.ruleForm,"newPassword2",r)},expression:"ruleForm.newPassword2"}},["password"===e.passwordType2?s("i",{staticClass:"fa fw fa-eye-slash",attrs:{slot:"suffix"},on:{click:e.togglePasswordType2},slot:"suffix"}):s("i",{staticClass:"fa fw fa-eye",attrs:{slot:"suffix"},on:{click:e.togglePasswordType2},slot:"suffix"})])],1)],1)],1),e._v(" "),s("el-row",{staticClass:"jee-submit-buttons"},[s("el-col",{attrs:{offset:1,span:21}},[s("el-button",{staticClass:"fa fa-check",attrs:{type:"primary",size:"small"},on:{click:function(r){e.validateSubmit(e.ruleForm)}}},[e._v("\n        保存\n      ")]),e._v(" "),s("el-button",{staticClass:"fa fa-reply-all",attrs:{size:"small"},on:{click:e.close}},[e._v("\n        关闭\n      ")])],1)],1)],1)},staticRenderFns:[]};var w={name:"PersonalInfo",components:{personalInfo:s("VU/8")(f,m,!1,function(e){s("0oXk")},"data-v-c4fb755a",null).exports,changePasssword:s("VU/8")(p,d,!1,function(e){s("ELqv")},"data-v-3b1ae4a8",null).exports},data:function(){return{tab:"1"}},created:function(){var e=this.$route.query.tab;this.tab="2"===e?"2":"1"},methods:{}},b={render:function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"jee-page personal-info"},[s("div",{staticClass:"jee-header-tab clearfix"},[s("div",{staticClass:"fl"},[e._v("\n      个人中心\n    ")]),e._v(" "),s("ul",{staticClass:"fr tabs clearfix"},[s("li",{class:{active:"1"===e.tab},on:{click:function(r){e.tab="1"}}},[e._v("个人信息")]),e._v(" "),s("li",{class:{active:"2"===e.tab},on:{click:function(r){e.tab="2"}}},[e._v("修改密码")])])]),e._v(" "),s("div",{staticStyle:{height:"calc(100% -50px)"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"1"===e.tab,expression:"tab==='1'"}],staticClass:"tab-content"},[s("personal-info")],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"2"===e.tab,expression:"tab==='2'"}],staticClass:"tab-content"},[s("change-passsword")],1)])])},staticRenderFns:[]};var v=s("VU/8")(w,b,!1,function(e){s("r1QR")},"data-v-a977b194",null);r.default=v.exports}});