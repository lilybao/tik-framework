webpackJsonp([29],{"+nwW":function(e,t){},I0Ic:function(e,t){},lBoo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("Xxa5"),s=a.n(l),r=a("exGp"),o=a.n(r),i=a("4w6b"),n=a("YMRc"),c=a("UWZQ"),u={mixins:[c.a],props:{visible:{type:Boolean,default:!1}},data:function(){return{searchForm:{loginName:"",userName:"",userEmail:"",userMobile:"",userPhone:""},asyncFunc:i.p,dialogVisible:!1,selectRow:null,btnLoading:!1}},watch:{visible:function(e){this.dialogVisible=e}},methods:{selChange:function(e){e&&("2"===e.userStatus?this.$message({type:"warning",message:"用户已经被停用，不能被选择!"}):this.selectRow=e||this.selectRow)},delSel:function(){this.selectRow=null},submit:function(){var e=this;return o()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.selectRow){t.next=3;break}return e.$message({type:"info",message:"请选择用户"}),t.abrupt("return");case 3:return e.btnLoading=!0,t.next=6,Object(n.c)({userUuid:e.selectRow.uuid});case 6:a=t.sent,e.btnLoading=!1,"0000"===a.code&&(e.$emit("select",e.selectRow),e.$emit("update:visible",!1),e.clearSel());case 9:case"end":return t.stop()}},t,e)}))()},close:function(){this.clearSel(),this.$emit("update:visible",!1)},clearSel:function(){this.$refs.table.setCurrentRow(),this.selectRow=null}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.dialogVisible,"before-close":e.close,title:"用户选择",top:"8vh",width:"90%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"main"},[a("el-form",{ref:"form",staticClass:"jee-search-form",attrs:{model:e.searchForm,inline:""}},[a("el-form-item",{attrs:{label:"账号:"}},[a("el-input",{attrs:{placeholder:"请填写",size:"small"},model:{value:e.searchForm.loginName,callback:function(t){e.$set(e.searchForm,"loginName",t)},expression:"searchForm.loginName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名:"}},[a("el-input",{attrs:{placeholder:"请填写",size:"small"},model:{value:e.searchForm.userName,callback:function(t){e.$set(e.searchForm,"userName",t)},expression:"searchForm.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱:"}},[a("el-input",{attrs:{placeholder:"请填写",size:"small"},model:{value:e.searchForm.userEmail,callback:function(t){e.$set(e.searchForm,"userEmail",t)},expression:"searchForm.userEmail"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机:"}},[a("el-input",{attrs:{placeholder:"请填写",size:"small"},model:{value:e.searchForm.userMobile,callback:function(t){e.$set(e.searchForm,"userMobile",t)},expression:"searchForm.userMobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话:"}},[a("el-input",{attrs:{placeholder:"请填写",size:"small"},model:{value:e.searchForm.userPhone,callback:function(t){e.$set(e.searchForm,"userPhone",t)},expression:"searchForm.userPhone"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.reset}},[e._v("重置")])],1)],1),e._v(" "),a("el-row",{directives:[{name:"auto-height",rawName:"v-auto-height"}],attrs:{gutter:10}},[a("el-col",{staticClass:"relative",attrs:{span:20}},[a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,loading:e.loading,height:"100%",border:"",stripe:"","highlight-current-row":""},on:{"current-change":e.selChange}},[a("el-table-column",{attrs:{type:"index",label:" ",align:"center",width:"45"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loginName",label:"账号",align:"center",width:"180","show-overflow-tooltip":"",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名",align:"center",width:"180","show-overflow-tooltip":"",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"userEmail",align:"center",label:"电子邮箱","show-overflow-tooltip":"",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"userMobile",align:"center",label:"手机号码","show-overflow-tooltip":"",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"userPhone",align:"center",label:"办公电话","show-overflow-tooltip":"",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态","show-overflow-tooltip":"",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.userStatus?a("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("正常")]):"2"===t.row.userStatus?a("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v("停用")]):e._e()]}}])})],1)],1),e._v(" "),a("el-col",{staticClass:"relative",attrs:{span:4}},[a("div",{staticClass:"selection"},[e._v("\n          已选择用户 "+e._s(e.selectRow?"1":"0")+" ："),a("br"),e._v(" "),e.selectRow?a("el-tag",{attrs:{closable:""},on:{close:e.delSel}},[e._v("\n            "+e._s(e.selectRow.loginName)+"\n          ")]):e._e()],1)])],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.current,"page-sizes":e.sizes,"page-size":e.size,total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChange,"current-change":e.pageChange}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{loading:e.btnLoading,type:"primary",size:"small"},on:{click:e.submit}},[e._v("确 定")])],1)])},staticRenderFns:[]};var p={name:"OrgAdmin",components:{userDialog:a("VU/8")(u,m,!1,function(e){a("I0Ic")},"data-v-7b5d5c3b",null).exports},mixins:[c.a],data:function(){return{searchForm:{loginName:"",userName:"",userEmail:"",userMobile:"",userPhone:""},asyncFunc:n.r,dialogVisible:!1}},mounted:function(){},methods:{goAdd:function(e){this.getTableData(),this.$router.push({name:"OrgAdminAdd",query:{uuid:e.uuid}})},goEdit:function(e){this.$router.push({name:"OrgAdminEdit",query:{uuid:e.uuid}})},cancel:function(e){var t=this;this.$confirm("确认要取消该机构管理员吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(o()(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(n.f)({userUuid:e.uuid});case 2:"0000"===a.sent.code&&(t.$message({type:"success",message:"取消成功!"}),t.getTableData());case 4:case"end":return a.stop()}},a,t)})))}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"jee-page"},[a("div",{staticClass:"jee-header"},[a("div",{staticClass:"jee-title"},[a("i",{class:e.$route.meta.icon}),e._v(" "+e._s(e.$route.meta.title))]),e._v(" "),a("div",{staticClass:"jee-tools"},[a("el-button",{attrs:{icon:"fa fa-filter",size:"small"},on:{click:function(t){e.showSearch=!e.showSearch}}},[e._v(" "+e._s(e.showSearch?"隐藏":"查询")+"\n      ")]),e._v(" "),e.$permission["sys:orgAdmin:add"]?a("el-button",{attrs:{icon:"fa fa-plus",size:"small"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("\n        新增\n      ")]):e._e()],1)]),e._v(" "),a("div",{staticClass:"jee-body"},[e.showSearch?a("el-form",{ref:"form",staticClass:"jee-search-form",attrs:{model:e.searchForm,inline:""}},[a("el-form-item",{attrs:{label:"账号:"}},[a("el-input",{attrs:{placeholder:"请填写",size:"small"},model:{value:e.searchForm.loginName,callback:function(t){e.$set(e.searchForm,"loginName",t)},expression:"searchForm.loginName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电子邮箱:"}},[a("el-input",{attrs:{placeholder:"请填写",size:"small"},model:{value:e.searchForm.userEmail,callback:function(t){e.$set(e.searchForm,"userEmail",t)},expression:"searchForm.userEmail"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码:"}},[a("el-input",{attrs:{placeholder:"请填写",size:"small"},model:{value:e.searchForm.userMobile,callback:function(t){e.$set(e.searchForm,"userMobile",t)},expression:"searchForm.userMobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"办公电话:"}},[a("el-input",{attrs:{placeholder:"请填写",size:"small"},model:{value:e.searchForm.userPhone,callback:function(t){e.$set(e.searchForm,"userPhone",t)},expression:"searchForm.userPhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态:"}},[a("el-select",{attrs:{size:"small"},model:{value:e.searchForm.userStatus,callback:function(t){e.$set(e.searchForm,"userStatus",t)},expression:"searchForm.userStatus"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"停用",value:"2"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.reset}},[e._v("重置")])],1)],1):e._e(),e._v(" "),a("div",{directives:[{name:"auto-height",rawName:"v-auto-height"}],staticClass:"jee-table-box"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,loading:e.loading,border:"",stripe:"",height:"100%"}},[a("el-table-column",{attrs:{type:"index",label:" ",align:"center",width:"45"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loginName",label:"账号",align:"center",width:"180","show-overflow-tooltip":"",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.goEdit(t.row)}}},[e._v(e._s(t.row.loginName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名",align:"center",width:"180","show-overflow-tooltip":"",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"userEmail",align:"center",label:"电子邮箱","show-overflow-tooltip":"",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"userMobile",align:"center",label:"手机号码","show-overflow-tooltip":"",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"userPhone",align:"center",label:"办公电话","show-overflow-tooltip":"",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"userStatus",align:"center",label:"状态",width:"92","show-overflow-tooltip":"",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.userStatus?a("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("正常")]):"2"===t.row.userStatus?a("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v("停用")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"149",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{"open-delay":400,effect:"light",content:"管理数据权限",placement:"bottom-start"}},[e.$permission["sys:orgAdmin:assign"]?a("el-button",{attrs:{type:"success-text",icon:"fa fa-pencil"},on:{click:function(a){e.goEdit(t.row)}}}):e._e()],1),e._v(" "),a("el-tooltip",{attrs:{"open-delay":400,effect:"light",content:"取消授权",placement:"bottom-start"}},[e.$permission["sys:orgAdmin:cancel"]?a("el-button",{attrs:{type:"primary-text",icon:"fa fa-remove"},on:{click:function(a){e.cancel(t.row)}}}):e._e()],1)]}}])})],1)],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.current,"page-sizes":e.sizes,"page-size":e.size,total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChange,"current-change":e.pageChange}})],1),e._v(" "),a("user-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},select:e.goAdd}})],1)},staticRenderFns:[]};var b=a("VU/8")(p,h,!1,function(e){a("+nwW")},"data-v-07204c88",null);t.default=b.exports}});