webpackJsonp([42],{"1wbt":function(e,t){},"KMj+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("Xxa5"),r=a.n(o),l=a("exGp"),s=a.n(l),n=a("UWZQ"),i=a("YMRc"),c=a("t5DY"),u={name:"Role",mixins:[n.a],data:function(){return{roleTypes:[],searchForm:{roleName:"",roleCode:""},asyncFunc:i.s}},created:function(){this.getRoleTypes()},methods:{getRoleTypes:function(){var e=this;return s()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.b)("sys_role_type");case 2:"0000"===(a=t.sent).code&&(e.roleTypes=a.data);case 4:case"end":return t.stop()}},t,e)}))()},goAdd:function(){this.$router.push({name:"RoleAdd"})},goEdit:function(e){this.$router.push({name:"RoleEdit",query:{uuid:e.uuid}})},goMenuAuth:function(e){this.$router.push({name:"RoleMenuAuth",query:{uuid:e.uuid}})},goUserAuth:function(e){this.$router.push({name:"RoleUser",query:{uuid:e.uuid}})},changeStatus:function(e){var t=this,a={uuid:e.uuid,roleStatus:"0"===e.roleStatus?"2":"0"},o="0"===e.roleStatus?"确认要停用该角色吗？":"确认要启用该角色吗？";this.$confirm(o,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(s()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.i)(a);case 2:"0000"===e.sent.code&&(t.$message({type:"success",message:"操作成功!"}),t.getTableData());case 4:case"end":return e.stop()}},e,t)})))},del:function(e){var t=this;this.$confirm("确认要删除该角色吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(s()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(i.l)({roleUuid:e.uuid});case 2:"0000"===a.sent.code&&(t.$message({type:"success",message:"删除成功!"}),t.getTableData());case 4:case"end":return a.stop()}},a,t)})))}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"jee-page"},[a("div",{staticClass:"jee-header"},[a("div",{staticClass:"jee-title"},[a("i",{class:e.$route.meta.icon}),e._v(" "+e._s(e.$route.meta.title))]),e._v(" "),a("div",{staticClass:"jee-tools"},[a("el-button",{attrs:{icon:"fa fa-filter",size:"small"},on:{click:function(t){e.showSearch=!e.showSearch}}},[e._v(" "+e._s(e.showSearch?"隐藏":"查询")+"\n      ")]),e._v(" "),e.$permission["sys:role:add"]?a("el-button",{attrs:{icon:"fa fa-plus",size:"small"},on:{click:e.goAdd}},[e._v(" 新增")]):e._e()],1)]),e._v(" "),a("div",{staticClass:"jee-body"},[e.showSearch?a("el-form",{ref:"form",staticClass:"jee-search-form",attrs:{model:e.searchForm,inline:""}},[a("el-form-item",{attrs:{label:"角色名称:"}},[a("el-input",{attrs:{placeholder:"请填写",size:"small"},model:{value:e.searchForm.roleName,callback:function(t){e.$set(e.searchForm,"roleName",t)},expression:"searchForm.roleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色编码："}},[a("el-input",{attrs:{placeholder:"请填写",size:"small"},model:{value:e.searchForm.roleCode,callback:function(t){e.$set(e.searchForm,"roleCode",t)},expression:"searchForm.roleCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色类型："}},[a("el-select",{attrs:{size:"small"},model:{value:e.searchForm.roleType,callback:function(t){e.$set(e.searchForm,"roleType",t)},expression:"searchForm.roleType"}},[a("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),e._l(e.roleTypes,function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"系统角色："}},[a("el-select",{attrs:{size:"small"},model:{value:e.searchForm.sysFlag,callback:function(t){e.$set(e.searchForm,"sysFlag",t)},expression:"searchForm.sysFlag"}},[a("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),a("el-option",{attrs:{value:"1",label:"是"}}),e._v(" "),a("el-option",{attrs:{value:"0",label:"否"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"状态："}},[a("el-select",{attrs:{size:"small"},model:{value:e.searchForm.roleStatus,callback:function(t){e.$set(e.searchForm,"roleStatus",t)},expression:"searchForm.roleStatus"}},[a("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),a("el-option",{attrs:{value:"0",label:"正常"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:"停用"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.reset}},[e._v("重置")])],1)],1):e._e(),e._v(" "),a("div",{directives:[{name:"auto-height",rawName:"v-auto-height"}],staticClass:"jee-table-box"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:"",height:"100%"}},[a("el-table-column",{attrs:{type:"index",label:" ",align:"center",width:"45"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",align:"center",label:"角色名称","show-overflow-tooltip":"",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.goEdit(t.row)}}},[e._v(e._s(t.row.roleName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"roleCode",align:"center",label:"角色编码","show-overflow-tooltip":"",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleSort",align:"center",label:"排序号","show-overflow-tooltip":"",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"sysFlag",align:"center",width:"102",label:"系统角色",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.sysFlag?a("span",[e._v("否")]):e._e(),e._v(" "),"1"===t.row.sysFlag?a("span",[e._v("是")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"roleTypeName",align:"center",label:"角色类型","show-overflow-tooltip":"",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"remarks","header-align":"center","min-width":"156","show-overflow-tooltip":"",sortable:"",label:"备注信息"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleStatus",align:"center",width:"92",label:"状态",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.roleStatus?a("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("正常")]):"2"===t.row.roleStatus?a("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v("停用")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"149",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{"open-delay":400,effect:"light",content:"编辑角色",placement:"bottom-start"}},[e.$permission["sys:role:edit"]?a("el-button",{attrs:{type:"success-text",icon:"fa fa-pencil"},on:{click:function(a){e.goEdit(t.row)}}}):e._e()],1),e._v(" "),e.$permission["sys:role:status"]&&"0"===t.row.roleStatus?a("el-tooltip",{attrs:{"open-delay":400,effect:"light",content:"停用角色",placement:"bottom-start"}},[a("el-button",{attrs:{type:"danger-text",icon:"fa fa-ban"},on:{click:function(a){e.changeStatus(t.row)}}})],1):e._e(),e._v(" "),"2"===t.row.roleStatus?a("el-tooltip",{attrs:{"open-delay":400,effect:"light",content:"启用角色",placement:"bottom-start"}},[e.$permission["sys:role:status"]?a("el-button",{attrs:{type:"primary-text",icon:"fa fa-play"},on:{click:function(a){e.changeStatus(t.row)}}}):e._e()],1):e._e(),e._v(" "),a("el-tooltip",{attrs:{"open-delay":400,effect:"light",content:"删除角色",placement:"bottom-start"}},[e.$permission["sys:role:delete"]?a("el-button",{attrs:{type:"danger-text",icon:"fa fa-trash-o"},on:{click:function(a){e.del(t.row)}}}):e._e()],1),e._v(" \n            "),e.$permission["sys:role:user"]&&e.$permission["sys:role:menu"]?a("el-popover",{attrs:{placement:"right",trigger:"hover"}},[e.$permission["sys:role:menu"]?a("el-button",{attrs:{size:"mini",icon:"fa fa-check-square-o"},on:{click:function(a){e.goMenuAuth(t.row)}}},[e._v(" 功能菜单\n              ")]):e._e(),e._v(" "),e.$permission["sys:role:user"]?a("el-button",{attrs:{size:"mini",icon:"fa fa-user"},on:{click:function(a){e.goUserAuth(t.row)}}},[e._v("\n                分配用户\n              ")]):e._e(),e._v(" "),a("el-tooltip",{attrs:{slot:"reference","open-delay":400,effect:"light",content:"更多操作",placement:"bottom-start"},slot:"reference"},[a("el-button",{attrs:{type:"primary-text",icon:"fa fa-chevron-circle-right"}})],1)],1):e._e()]}}])})],1)],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.current,"page-sizes":e.sizes,"page-size":e.size,total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChange,"current-change":e.pageChange}})],1)])},staticRenderFns:[]};var m=a("VU/8")(u,p,!1,function(e){a("1wbt")},"data-v-366b14c8",null);t.default=m.exports}});