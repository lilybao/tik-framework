webpackJsonp([35],{"XCb/":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=r("Xxa5"),a=r.n(l),s=r("exGp"),n=r.n(s),o=r("4w6b"),i={name:"AssignUser",data:function(){return{rolesAll:[],tableData:[{field01:"部门经理",field02:"dept"}],ruleForm:{},rules:{name01:[{required:!0,message:"请输入",trigger:"blur"}]},multipleSelection:[],loading:!1}},created:function(){var e=this;return n()(a.a.mark(function t(){var r,l,s,n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$route.query,l=r.uuid,s=r.userName,n=r.loginName,e.uuid=l,e.ruleForm={uuid:l,userName:s,loginName:n},t.next=5,e.getRolesAll();case 5:e.getUserRole(l);case 6:case"end":return t.stop()}},t,e)}))()},methods:{toggleSelection:function(e){var t=this;e?(this.$refs.multipleTable.clearSelection(),e.forEach(function(e){var r=t.rolesAll.filter(function(t){return t.uuid===e.uuid});t.$refs.multipleTable.toggleRowSelection(r[0])})):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){console.log(e),this.multipleSelection=e.map(function(e){return e.uuid})},getRolesAll:function(){var e=this;return n()(a.a.mark(function t(){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.r)();case 2:"0000"===(r=t.sent).code&&(e.rolesAll=r.data);case 4:case"end":return t.stop()}},t,e)}))()},getUserRole:function(e){var t=this;return n()(a.a.mark(function r(){var l,s;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(o.t)({userUuid:e});case 2:"0000"===(l=r.sent).code&&(s=l.data.map(function(e){return{uuid:e.roleUuid}}),t.toggleSelection(s));case 4:case"end":return r.stop()}},r,t)}))()},submit:function(e,t){var r=this;return n()(a.a.mark(function l(){var s;return a.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return r.loading=!0,l.next=3,Object(o.s)({userUuid:e,roleUuidList:t});case 3:s=l.sent,r.loading=!1,"0000"===s.code&&(r.$message({message:s.message,type:"success"}),r.jumpRouterView(r.$route,{path:"/sys/user"}));case 6:case"end":return l.stop()}},l,r)}))()},close:function(){this.jumpRouterCachedView(this.$route,{path:"/sys/user"})}}},u={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"assign-user jee-page"},[r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"110px"}},[r("el-row",{staticClass:"first-section"},[r("el-col",{attrs:{offset:1,span:10}},[r("el-form-item",{attrs:{label:"账号：",prop:"userName"}},[r("el-input",{attrs:{disabled:!0,size:"small"},model:{value:e.ruleForm.loginName,callback:function(t){e.$set(e.ruleForm,"loginName",t)},expression:"ruleForm.loginName"}})],1)],1),e._v(" "),r("el-col",{attrs:{offset:1,span:10}},[r("el-form-item",{attrs:{label:"用户名：",prop:"userName"}},[r("el-input",{attrs:{disabled:!0,size:"small"},model:{value:e.ruleForm.userName,callback:function(t){e.$set(e.ruleForm,"userName",t)},expression:"ruleForm.userName"}})],1)],1)],1),e._v(" "),r("h3",{staticClass:"jee-page-h3-title"},[e._v("分配角色")]),e._v(" "),r("div",{staticClass:"second-section"},[r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.rolesAll,border:""},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",align:"center",width:"50"}}),e._v(" "),r("el-table-column",{attrs:{prop:"roleName",align:"center",label:"角色名称"}}),e._v(" "),r("el-table-column",{attrs:{prop:"roleCode",align:"center",label:"角色编码"}})],1)],1),e._v(" "),r("el-row",{staticClass:"jee-submit-buttons"},[r("el-col",{attrs:{offset:1,span:21}},[r("el-button",{staticClass:"fa fa-check",attrs:{loading:e.loading,type:"primary",size:"small"},on:{click:function(t){e.submit(e.uuid,e.multipleSelection)}}},[e._v("\n          保存\n        ")]),e._v(" "),r("el-button",{staticClass:"fa fa-reply-all",attrs:{size:"small"},on:{click:e.close}},[e._v("\n          关闭\n        ")])],1)],1)],1)],1)},staticRenderFns:[]};var c=r("VU/8")(i,u,!1,function(e){r("hRrA")},"data-v-6c6d4c84",null);t.default=c.exports},hRrA:function(e,t){}});