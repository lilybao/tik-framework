webpackJsonp([37],{"3yTp":function(t,e){},Plo6:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Xxa5"),n=a.n(s),o=a("woOf"),r=a.n(o),i=a("exGp"),c=a.n(i),l=a("zM1N"),u=a.n(l),p=a("4w6b"),m={name:"Post",data:function(){return{searchForm:{},searchFormTemp:{},pageIndex:1,tableData:[],showSearch:!0,pagination:{current:1,size:20,sizes:[10,20,50,100],total:0}}},mounted:function(){this.getTableData()},methods:{pageChange:function(t){this.pagination.current=t,this.getTableData()},sizeChange:function(t){this.pagination.current=1,this.pagination.size=t,this.getTableData()},getTableData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.searchFormTemp;return c()(n.a.mark(function a(){var s,o,i,c,l,u,m,h,f;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s=t.pagination,o=s.current,i=s.size,t.loading=!0,a.next=4,Object(p.j)({current:o,size:i,data:e});case 4:c=a.sent,t.loading=!1,"0000"===c.code&&(l=c.data,u=l.current,m=l.size,h=l.total,f=l.records,t.pagination=r()({},t.pagination,{current:u,size:m,total:h}),t.tableData=f);case 7:case"end":return a.stop()}},a,t)}))()},goPostAdd:function(){this.$router.push("/sys/post/add")},goPostEdit:function(t){this.$router.push("/sys/post/edit?uuid="+t)},stopPost:function(t){var e=this;this.$confirm("此操作将停用该岗位, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(c()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(p.l)({uuid:t,postStatus:"2"});case 2:"0000"===a.sent.code&&(e.$message({type:"success",message:"停用成功!"}),e.getTableData());case 4:case"end":return a.stop()}},a,e)}))).catch(function(){e.$message({type:"info",message:"已取消停用"})})},startPost:function(t){var e=this;this.$confirm("此操作将启用该岗位, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(c()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(p.l)({uuid:t,postStatus:"0"});case 2:"0000"===a.sent.code&&(e.$message({type:"success",message:"启用成功!"}),e.getTableData());case 4:case"end":return a.stop()}},a,e)}))).catch(function(){e.$message({type:"info",message:"已取消启用"})})},delPost:function(t){var e=this;this.$confirm("此操作将永久删除该岗位, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(c()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(p.h)({postUuid:t});case 2:"0000"===a.sent.code&&(e.$message({type:"success",message:"删除成功!"}),e.getTableData());case 4:case"end":return a.stop()}},a,e)}))).catch(function(){e.$message({type:"info",message:"已取消删除"})})},query:function(t){this.pagination.current=1,this.searchFormTemp=u()(t),this.getTableData()},resetForm:function(){this.searchForm={},this.query({})}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jee-page"},[a("div",{staticClass:"jee-header"},[a("div",{staticClass:"jee-title"},[a("i",{class:t.$route.meta.icon}),t._v(" "+t._s(t.$route.meta.title))]),t._v(" "),a("div",{staticClass:"jee-tools"},[a("el-button",{attrs:{icon:"fa fa-filter",size:"small"},on:{click:function(e){t.showSearch=!t.showSearch}}},[t._v(" "+t._s(t.showSearch?"隐藏":"查询")+"\n      ")]),t._v(" "),a("el-button",{attrs:{icon:"fa fa-plus",size:"small"},on:{click:t.goPostAdd}},[t._v(" 新增")])],1)]),t._v(" "),a("div",{staticClass:"jee-body"},[t.showSearch?a("el-form",{ref:"form",staticClass:"jee-search-form",attrs:{model:t.searchForm,inline:""}},[a("el-form-item",{attrs:{label:"岗位名称："}},[a("el-input",{staticStyle:{width:"90px"},attrs:{placeholder:"请填写",size:"small",clearable:""},model:{value:t.searchForm.postName,callback:function(e){t.$set(t.searchForm,"postName",e)},expression:"searchForm.postName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"岗位编码："}},[a("el-input",{staticStyle:{width:"90px"},attrs:{placeholder:"请填写",size:"small",clearable:""},model:{value:t.searchForm.postCode,callback:function(e){t.$set(t.searchForm,"postCode",e)},expression:"searchForm.postCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"状态："}},[a("el-select",{staticStyle:{width:"90px"},attrs:{placeholder:"请选择",clearable:"",size:"small"},model:{value:t.searchForm.postStatus,callback:function(e){t.$set(t.searchForm,"postStatus",e)},expression:"searchForm.postStatus"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),a("el-option",{attrs:{value:0,label:"正常"}}),t._v(" "),a("el-option",{attrs:{value:2,label:"停用"}})],1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.query(t.searchForm)}}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.resetForm}},[t._v("重置")])],1)],1):t._e(),t._v(" "),a("div",{directives:[{name:"auto-height",rawName:"v-auto-height"}],staticClass:"jee-table-box"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",height:"100%"}},[a("el-table-column",{attrs:{type:"index",width:"70",align:"center",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"postName",align:"center",label:"岗位名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"postCode",align:"center",label:"岗位编码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"postSort",align:"center",label:"排序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remarks",align:"center",label:"备注信息"}}),t._v(" "),a("el-table-column",{attrs:{prop:"postStatus",align:"center",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return["0"===e.row.postStatus?a("el-tag",{attrs:{type:"success",size:"mini"}},[t._v("正常")]):"2"===e.row.postStatus?a("el-tag",{attrs:{type:"danger",size:"mini"}},[t._v("停用")]):"3"===e.row.postStatus?a("el-tag",{attrs:{type:"danger",size:"mini"}},[t._v("冻结")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.$permission["sys:post:edit"]?a("el-tooltip",{attrs:{"open-delay":400,effect:"light",content:"编辑岗位",placement:"bottom-start"}},[a("el-button",{attrs:{type:"success-text",icon:"fa fa-pencil"},on:{click:function(a){t.goPostEdit(e.row.uuid)}}})],1):t._e(),t._v(" "),t.$permission["sys:post:status"]?["0"===e.row.postStatus?a("el-tooltip",{attrs:{"open-delay":400,effect:"light",content:"停用岗位",placement:"bottom-start"}},[a("el-button",{attrs:{type:"danger-text",icon:"fa fa-ban"},on:{click:function(a){t.stopPost(e.row.uuid)}}})],1):t._e(),t._v(" "),"2"===e.row.postStatus?a("el-tooltip",{attrs:{"open-delay":400,effect:"light",content:"启用岗位",placement:"bottom-start"}},[a("el-button",{attrs:{type:"success-text",icon:"fa fa-play"},on:{click:function(a){t.startPost(e.row.uuid)}}})],1):t._e()]:t._e(),t._v(" "),t.$permission["sys:post:delete"]?a("el-tooltip",{attrs:{"open-delay":400,effect:"light",content:"删除岗位",placement:"bottom-start"}},[a("el-button",{attrs:{type:"danger-text",icon:"fa fa-trash-o"},on:{click:function(a){t.delPost(e.row.uuid)}}})],1):t._e()]}}])})],1)],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.pagination.current,"page-sizes":t.pagination.sizes,"page-size":t.pagination.size,total:t.pagination.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.sizeChange,"current-change":t.pageChange}})],1)])},staticRenderFns:[]};var f=a("VU/8")(m,h,!1,function(t){a("3yTp")},"data-v-4cc16674",null);e.default=f.exports}});