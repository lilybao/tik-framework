webpackJsonp([23],{"2o+0":function(e,t){},"HL+v":function(e,t,r){"use strict";var a=r("Xxa5"),s=r.n(a),o=r("exGp"),l=r.n(o),n=r("Dd8w"),i=r.n(n),c=r("M4fF"),u=r.n(c),f=r("RbaZ"),d={roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}],roleCode:[{required:!0,message:"请输入角色编码",trigger:"blur"},{pattern:/^\w+$/,message:"只能包括英文字母、数字和下划线",trigger:"blur"}],roleSort:[{pattern:/^\d+$/,message:"请输入数字",trigger:"change"}],sysFlag:[{required:!0,message:"请选择",trigger:"change"}],remarks:[{max:150,message:"请输入不超过150个字符",trigger:"change"}]},m=r("YMRc"),p=r("t5DY"),h={props:{isEdit:{type:Boolean,default:!1}},data:function(){return{form:{roleName:"",roleCode:"",roleSort:"",roleType:"",sysFlag:"",remarks:""},rules:i()({},d),treeData:[],treeProp:{children:"children",label:"menuName"},loading:!1,typeOptions:[]}},mounted:function(){this.getDictData(),this.findMenuList(),this.initForm()},methods:{initForm:function(){this.$refs.form.resetFields(),this.isEdit&&(this.$route.query.uuid?this.getDetail(this.$route.query.uuid):this.jumpRouterCachedView(this.$route,{path:"/sys/role"}))},findMenuList:function(){var e=this;return l()(s.a.mark(function t(){var r,a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(m.A)();case 2:r=t.sent,a=Object(f.a)(r.data),e.treeData=[{uuid:0,menuName:"全部",children:Object(f.b)(a,"menuSort")}];case 5:case"end":return t.stop()}},t,e)}))()},getDetail:function(e){var t=this;return l()(s.a.mark(function r(){var a,o;return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(m.x)({roleUuid:e});case 2:if("0000"===(a=r.sent).code&&a.data)for(o in a.data)a.data.hasOwnProperty(o)&&null!==a.data[o]&&(t.form[o]=a.data[o]);case 4:case"end":return r.stop()}},r,t)}))()},getDictData:function(){var e=this;return l()(s.a.mark(function t(){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.b)("sys_role_type");case 2:"0000"===(r=t.sent).code&&(e.typeOptions=r.data);case 4:case"end":return t.stop()}},t,e)}))()},save:function(){var e=this;this.$refs.form.validate(function(t){if(t){var r=u.a.cloneDeep(e.form);e.isEdit?e.submit(m.o,r):(r.menuUuidList=e.$refs.tree.getCheckedKeys().filter(function(e){return 0!==e}),e.submit(m.d,r))}})},submit:function(e,t){var r=this;return l()(s.a.mark(function a(){var o;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r.loading=!0,a.next=3,e(t);case 3:o=a.sent,r.loading=!1,"0000"===o.code&&(r.$message({type:"success",message:"操作成功"}),r.jumpRouterView(r.$route,{path:"/sys/role"}));case 6:case"end":return a.stop()}},a,r)}))()},close:function(){this.jumpRouterCachedView(this.$route,{path:"/sys/role"})},foldTree:function(){this.toggleTree(!1)},openTree:function(){this.toggleTree(!0)},toggleTree:function(e){for(var t=0;t<this.$refs.tree.store._getAllNodes().length;t++)this.$refs.tree.store._getAllNodes()[t].expanded=e},handleCheckChange:function(e,t,r){console.log(e,t,r)}}},v={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px",size:"small"}},[r("div",{staticClass:"jee-form-title"},[e._v("基本信息")]),e._v(" "),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{offset:1,span:10}},[r("el-form-item",{attrs:{label:"角色名称：",prop:"roleName"}},[r("el-input",{attrs:{maxlength:"50"},model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}})],1)],1),e._v(" "),r("el-col",{attrs:{offset:1,span:10}},[r("el-form-item",{attrs:{label:"角色编码：",prop:"roleCode"}},[r("el-input",{attrs:{maxlength:"30"},model:{value:e.form.roleCode,callback:function(t){e.$set(e.form,"roleCode",t)},expression:"form.roleCode"}})],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{offset:1,span:10}},[r("el-form-item",{attrs:{label:"排序号：",prop:"roleSort"}},[r("el-input",{attrs:{maxlength:"9",min:"0"},model:{value:e.form.roleSort,callback:function(t){e.$set(e.form,"roleSort",t)},expression:"form.roleSort"}})],1)],1),e._v(" "),r("el-col",{attrs:{offset:1,span:10}},[r("el-form-item",{attrs:{label:"角色类型："}},[r("el-select",{staticStyle:{width:"100%"},model:{value:e.form.roleType,callback:function(t){e.$set(e.form,"roleType",t)},expression:"form.roleType"}},e._l(e.typeOptions,function(e){return r("el-option",{key:e.dictValue,attrs:{value:e.dictValue,label:e.dictLabel}})}))],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{offset:1,span:10}},[r("el-form-item",{attrs:{label:"系统内置：",prop:"sysFlag"}},[r("el-radio-group",{model:{value:e.form.sysFlag,callback:function(t){e.$set(e.form,"sysFlag",t)},expression:"form.sysFlag"}},[r("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),r("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{offset:1,span:21}},[r("el-form-item",{attrs:{label:"备注信息：",prop:"remarks"}},[r("el-input",{attrs:{type:"textarea",rows:"3"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1)],1),e._v(" "),e.isEdit?e._e():r("div",{staticClass:"jee-form-title"},[e._v("授权功能菜单")]),e._v(" "),e.isEdit?e._e():r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"box-card-header clearfix",attrs:{slot:"header"},slot:"header"},[r("span",{staticClass:"fl"},[e._v("功能菜单")]),e._v(" "),r("div",{staticClass:"fr"},[r("span",{on:{click:e.openTree}},[e._v("展开")]),e._v(" / "),r("span",{on:{click:e.foldTree}},[e._v("折叠")])])]),e._v(" "),r("el-tree",{ref:"tree",attrs:{data:e.treeData,props:e.treeProp,"default-expanded-keys":[0],"node-key":"uuid","show-checkbox":""},on:{"check-change":e.handleCheckChange}})],1),e._v(" "),r("el-row",{staticClass:"jee-submit-buttons"},[r("el-col",{attrs:{offset:1,span:21}},[r("el-button",{attrs:{loading:e.loading,type:"primary",icon:"fa fa-check",size:"small"},on:{click:e.save}},[e._v("  保 存\n      ")]),e._v(" "),r("el-button",{attrs:{icon:"fa fa-reply-all",size:"small"},on:{click:e.close}},[e._v("  关 闭")])],1)],1)],1)},staticRenderFns:[]};var g=r("VU/8")(h,v,!1,function(e){r("2o+0")},"data-v-1270e2d8",null);t.a=g.exports},KPXb:function(e,t){},twKk:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={name:"RoleEdit",components:{infoForm:r("HL+v").a}},s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"jee-page"},[t("div",{staticClass:"jee-header"},[t("div",{staticClass:"jee-title"},[t("i",{class:this.$route.meta.icon}),this._v(" "+this._s(this.$route.meta.title))])]),this._v(" "),t("div",{staticClass:"jee-body"},[t("info-form",{attrs:{"is-edit":""}})],1)])},staticRenderFns:[]};var o=r("VU/8")(a,s,!1,function(e){r("KPXb")},"data-v-46ab1242",null);t.default=o.exports}});